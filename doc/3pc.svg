<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: three_phase_commit Pages: 1 -->
<svg width="446pt" height="388pt"
 viewBox="0.00 0.00 446.19 388.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 384)">
<title>three_phase_commit</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-384 442.1946,-384 442.1946,4 -4,4"/>
<!-- Ready -->
<g id="node1" class="node">
<title>Ready</title>
<ellipse fill="none" stroke="#000000" cx="266.5667" cy="-362" rx="35.8407" ry="18"/>
<text text-anchor="middle" x="266.5667" y="-357.8" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">Ready</text>
</g>
<!-- Verify -->
<g id="node2" class="node">
<title>Verify</title>
<ellipse fill="none" stroke="#000000" cx="266.5667" cy="-276" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="266.5667" y="-271.8" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">Verify</text>
</g>
<!-- Ready&#45;&gt;Verify -->
<g id="edge1" class="edge">
<title>Ready&#45;&gt;Verify</title>
<path fill="none" stroke="#000000" d="M266.5667,-343.7616C266.5667,-332.3597 266.5667,-317.4342 266.5667,-304.494"/>
<polygon fill="#000000" stroke="#000000" points="270.0668,-304.2121 266.5667,-294.2121 263.0668,-304.2121 270.0668,-304.2121"/>
<text text-anchor="middle" x="335.3841" y="-314.8" font-family="Times,serif" font-size="14.00" fill="#000000"> send txid to secondaries</text>
</g>
<!-- Verify&#45;&gt;Verify -->
<g id="edge2" class="edge">
<title>Verify&#45;&gt;Verify</title>
<path fill="none" stroke="#000000" d="M295.7233,-283.8361C307.2051,-284.2312 316.7951,-281.6191 316.7951,-276 316.7951,-272.2246 312.466,-269.8067 306.1427,-268.7463"/>
<polygon fill="#000000" stroke="#000000" points="305.9031,-265.2275 295.7233,-268.1639 305.5124,-272.2166 305.9031,-265.2275"/>
<text text-anchor="middle" x="358.385" y="-271.8" font-family="Times,serif" font-size="14.00" fill="#32cd32"> secondary ack</text>
</g>
<!-- Prepare -->
<g id="node3" class="node">
<title>Prepare</title>
<ellipse fill="none" stroke="#000000" cx="181.5667" cy="-190" rx="41.6371" ry="18"/>
<text text-anchor="middle" x="181.5667" y="-185.8" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">Prepare</text>
</g>
<!-- Verify&#45;&gt;Prepare -->
<g id="edge3" class="edge">
<title>Verify&#45;&gt;Prepare</title>
<path fill="none" stroke="#000000" d="M250.9764,-260.2263C238.1611,-247.2602 219.8003,-228.6834 205.1816,-213.8927"/>
<polygon fill="#000000" stroke="#000000" points="207.4462,-211.205 197.9272,-206.553 202.4675,-216.1257 207.4462,-211.205"/>
<text text-anchor="middle" x="255.7806" y="-228.8" font-family="Times,serif" font-size="14.00" fill="#32cd32"> verify ok</text>
</g>
<!-- Abort -->
<g id="node5" class="node">
<title>Abort</title>
<ellipse fill="#ff6347" stroke="#ff6347" cx="218.5667" cy="-18" rx="31.4897" ry="18"/>
<text text-anchor="middle" x="218.5667" y="-13.8" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">Abort</text>
</g>
<!-- Verify&#45;&gt;Abort -->
<g id="edge4" class="edge">
<title>Verify&#45;&gt;Abort</title>
<path fill="none" stroke="#000000" d="M287.312,-262.0221C303.3243,-249.8772 324.2641,-230.6959 333.5667,-208 344.6113,-181.054 329.9956,-99.3562 321.5667,-86 305.7867,-60.9956 277.0926,-43.1901 253.9909,-32.0876"/>
<polygon fill="#000000" stroke="#000000" points="255.358,-28.8642 244.809,-27.879 252.4412,-35.2275 255.358,-28.8642"/>
<text text-anchor="middle" x="386.8807" y="-142.8" font-family="Times,serif" font-size="14.00" fill="#ff6347"> verification failed</text>
</g>
<!-- Prepare&#45;&gt;Prepare -->
<g id="edge5" class="edge">
<title>Prepare&#45;&gt;Prepare</title>
<path fill="none" stroke="#000000" d="M219.0874,-197.8745C231.3616,-197.8338 241.1352,-195.209 241.1352,-190 241.1352,-186.3374 236.3033,-183.9524 229.1676,-182.845"/>
<polygon fill="#000000" stroke="#000000" points="229.3112,-179.3464 219.0874,-182.1255 228.8128,-186.3287 229.3112,-179.3464"/>
<text text-anchor="middle" x="282.725" y="-185.8" font-family="Times,serif" font-size="14.00" fill="#32cd32"> secondary ack</text>
</g>
<!-- Commit -->
<g id="node4" class="node">
<title>Commit</title>
<ellipse fill="#32cd32" stroke="#32cd32" cx="40.5667" cy="-104" rx="40.6335" ry="18"/>
<text text-anchor="middle" x="40.5667" y="-99.8" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">Commit</text>
</g>
<!-- Prepare&#45;&gt;Commit -->
<g id="edge6" class="edge">
<title>Prepare&#45;&gt;Commit</title>
<path fill="none" stroke="#000000" d="M157.3279,-175.2161C134.0848,-161.0394 98.8304,-139.5367 73.1414,-123.8683"/>
<polygon fill="#000000" stroke="#000000" points="74.849,-120.8101 64.4892,-118.591 71.204,-126.7863 74.849,-120.8101"/>
<text text-anchor="middle" x="157.2771" y="-142.8" font-family="Times,serif" font-size="14.00" fill="#32cd32"> apply update</text>
</g>
<!-- Prepare&#45;&gt;Abort -->
<g id="edge7" class="edge">
<title>Prepare&#45;&gt;Abort</title>
<path fill="none" stroke="#000000" d="M191.1149,-172.4681C193.895,-166.7248 196.6865,-160.2191 198.5667,-154 209.4805,-117.9014 214.5412,-74.548 216.8163,-46.6512"/>
<polygon fill="#000000" stroke="#000000" points="220.3265,-46.6452 217.5823,-36.412 213.346,-46.123 220.3265,-46.6452"/>
<text text-anchor="middle" x="264.7332" y="-99.8" font-family="Times,serif" font-size="14.00" fill="#ff6347"> don&#39;t apply update</text>
</g>
<!-- Commit&#45;&gt;Commit -->
<g id="edge8" class="edge">
<title>Commit&#45;&gt;Commit</title>
<path fill="none" stroke="#000000" d="M77.1709,-111.875C89.3723,-111.875 99.1334,-109.25 99.1334,-104 99.1334,-100.3086 94.3076,-97.9149 87.201,-96.8191"/>
<polygon fill="#000000" stroke="#000000" points="87.3887,-93.3238 77.1709,-96.125 86.9054,-100.3071 87.3887,-93.3238"/>
<text text-anchor="middle" x="140.7232" y="-99.8" font-family="Times,serif" font-size="14.00" fill="#32cd32"> secondary ack</text>
</g>
<!-- Commit&#45;&gt;Abort -->
<g id="edge9" class="edge">
<title>Commit&#45;&gt;Abort</title>
<path fill="none" stroke="#000000" stroke-dasharray="1,5" d="M67.1004,-90.0823C86.7869,-79.8591 114.3486,-65.7617 138.8597,-54 153.6529,-46.9014 170.1597,-39.3811 184.2974,-33.0599"/>
<polygon fill="#000000" stroke="#000000" points="185.9432,-36.1586 193.6565,-28.8953 183.0972,-29.7632 185.9432,-36.1586"/>
<text text-anchor="middle" x="172.4202" y="-56.8" font-family="Times,serif" font-size="14.00" fill="#ff6347"> try to abort</text>
</g>
</g>
</svg>
